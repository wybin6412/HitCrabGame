var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
var GameTopPanel_1 = require("./layer/GameTopPanel");
var HammerMgr_1 = require("./manger/HammerMgr");
var GameMouseLayer_1 = require("./layer/GameMouseLayer");
var MainScene_1 = require("./scene/MainScene");
/*
* 游戏初始化配置;
*/
var GameConfig = /** @class */ (function () {
    function GameConfig() {
    }
    GameConfig.init = function () {
        var reg = Laya.ClassUtils.regClass;
        reg("layer/GameTopPanel.ts", GameTopPanel_1.default);
        reg("manger/HammerMgr.ts", HammerMgr_1.default);
        reg("layer/GameMouseLayer.ts", GameMouseLayer_1.default);
        reg("scene/MainScene.ts", MainScene_1.default);
    };
    GameConfig.width = 1136;
    GameConfig.height = 640;
    GameConfig.scaleMode = "fixedwidth";
    GameConfig.screenMode = "horizontal";
    GameConfig.alignV = "middle";
    GameConfig.alignH = "center";
    GameConfig.startScene = "Scene/GameStart.scene";
    GameConfig.sceneRoot = "";
    GameConfig.debug = false;
    GameConfig.stat = false;
    GameConfig.physicsDebug = false;
    GameConfig.exportSceneToJson = true;
    return GameConfig;
}());
exports.default = GameConfig;
GameConfig.init();
},{"./layer/GameMouseLayer":3,"./layer/GameTopPanel":4,"./manger/HammerMgr":5,"./scene/MainScene":8}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameConfig_1 = require("./GameConfig");
var Main = /** @class */ (function () {
    function Main() {
        //根据IDE设置初始化引擎		
        if (window["Laya3D"])
            Laya3D.init(GameConfig_1.default.width, GameConfig_1.default.height);
        else
            Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.scaleMode = GameConfig_1.default.scaleMode;
        Laya.stage.screenMode = GameConfig_1.default.screenMode;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = GameConfig_1.default.exportSceneToJson;
        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (GameConfig_1.default.debug || Laya.Utils.getQueryString("debug") == "true")
            Laya.enableDebugPanel();
        if (GameConfig_1.default.physicsDebug && Laya["PhysicsDebugDraw"])
            Laya["PhysicsDebugDraw"].enable();
        if (GameConfig_1.default.stat)
            Laya.Stat.show();
        Laya.alertGlobalError = true;
        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }
    Main.prototype.onVersionLoaded = function () {
        //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
        Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    };
    Main.prototype.onConfigLoaded = function () {
        //加载IDE指定的场景
        GameConfig_1.default.startScene && Laya.Scene.open(GameConfig_1.default.startScene);
    };
    return Main;
}());
//激活启动类
new Main();
},{"./GameConfig":1}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameModel_1 = require("../module/GameModel");
var ListenerManger_1 = require("../manger/ListenerManger");
var GameLayer = /** @class */ (function (_super) {
    __extends(GameLayer, _super);
    function GameLayer() {
        var _this = _super.call(this) || this;
        _this.mouseArr = [];
        _this.skis = ['ui/px_normal_1.png', 'ui/px_normal_2.png'];
        _this.hitSkis = ['ui/px_hit_1.png', 'ui/px_hit_2.png'];
        return _this;
    }
    GameLayer.prototype.onEnable = function () {
        ListenerManger_1.ListenerMgr.Instance().on('onHammerHit', this, this.onCheckHit);
    };
    GameLayer.prototype.onStart = function () {
        this.mouseBirthAI();
    };
    GameLayer.prototype.mouseBirthAI = function () {
        var id = (Math.random() * 9 + 1) | 0;
        while (id == GameModel_1.default.Instacne().curHoleIdx) {
            id = (Math.random() * 9 + 1) | 0;
        }
        var type = ((Math.random() * 4) | 0);
        type = type == 0 ? 1 : 0;
        if (!this.mouseArr[id]) {
            this.mouseArr[id] = this.mousCreateById(id, type);
        }
        var mouse = this.mouseArr[id];
        mouse.skin = this.skis[type];
        this.mouseUpAnim(mouse);
        Laya.timer.once(1500, this, this.mouseDownAnim, [mouse]);
        GameModel_1.default.Instacne().curMouseType = type;
        GameModel_1.default.Instacne().curHoleIdx = id;
    };
    GameLayer.prototype.mousCreateById = function (id, type) {
        var mouseItem = this.owner.getChildByName('mouseItem_' + id);
        var bg = mouseItem.getChildByName('bg');
        var mouse = new Laya.Image(this.skis[type]);
        mouse.alpha = 0;
        bg.addChild(mouse);
        return mouse;
    };
    GameLayer.prototype.mouseUpAnim = function (celler) {
        celler.visible = true;
        Laya.Tween.to(celler, { alpha: 1 }, 100);
        Laya.Tween.to(celler, { y: -23 }, 200, Laya.Ease.linearIn, null, 100);
    };
    GameLayer.prototype.stopMouseDownTimeout = function () {
        Laya.timer.clear(this, this.mouseDownAnim);
    };
    GameLayer.prototype.mouseDownAnim = function (celler) {
        var _this = this;
        Laya.Tween.to(celler, { y: 0 }, 200);
        Laya.Tween.to(celler, { alpha: 0 }, 100, Laya.Ease.linearIn, Laya.Handler.create(this, function () {
            celler.visible = false;
            _this.mouseBirthAI();
        }), 200);
    };
    GameLayer.prototype.checkHit = function (bounds) {
        for (var i = 1; i <= 10; i++) {
            var mouse = this.mouseArr[i];
            if (!mouse)
                continue;
            var targetBounds = mouse.getBounds();
            var globalPos = mouse.localToGlobal(new Laya.Point(0, 0));
            targetBounds.x = globalPos.x;
            targetBounds.y = globalPos.y;
            var isHit = targetBounds.intersection(bounds);
            if (isHit)
                return i;
        }
        return -1;
    };
    GameLayer.prototype.hitMouseAnim = function (celler) {
        celler.y = 0;
        celler.skin = this.hitSkis[GameModel_1.default.Instacne().curMouseType];
    };
    GameLayer.prototype.onCheckHit = function (hammer) {
        var idx = this.checkHit(hammer.getBounds());
        console.log('hit mouse No is ', idx);
        var mouse = this.mouseArr[idx];
        mouse && this.hitMouseAnim(mouse);
        ListenerManger_1.ListenerMgr.Instance().event('onUpdateScoreMgr', GameModel_1.default.Instacne().curMouseType);
    };
    GameLayer.prototype.onDisable = function () {
        ListenerManger_1.ListenerMgr.Instance().offAllCaller(this);
    };
    return GameLayer;
}(Laya.Script));
exports.default = GameLayer;
},{"../manger/ListenerManger":6,"../module/GameModel":7}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var ListenerManger_1 = require("../manger/ListenerManger");
var GameTopPanel = /** @class */ (function (_super) {
    __extends(GameTopPanel, _super);
    function GameTopPanel() {
        return _super.call(this) || this;
    }
    GameTopPanel.prototype.onEnable = function () {
        ListenerManger_1.ListenerMgr.Instance().on('onUpdateScoreMgr', this, this.onUpdateScoreHandler);
    };
    GameTopPanel.prototype.onStart = function () {
        this.chanceTime = this.owner.getChildByName('chanceTime');
        this.gameScore = this.owner.getChildByName('score');
        this.score = 0;
        this.initUI();
        Laya.timer.loop(1000, this, this.onLoop);
    };
    GameTopPanel.prototype.initUI = function () {
        this.setChanceTime(1);
        this.setScore(0);
        this.updateScoreUI();
    };
    GameTopPanel.prototype.setChanceTime = function (numb) {
        this.chanceTime.value = numb;
    };
    GameTopPanel.prototype.setScore = function (type) {
        this.score += (type == 0 ? -100 : 100);
        if (this.score < 0)
            this.score = 0;
        this.updateScoreUI();
    };
    GameTopPanel.prototype.updateScoreUI = function () {
        var data = {};
        var temp = this.score;
        for (var i = 9; i > -1; i--) {
            data["num" + i] = { index: temp % 10 };
            temp /= 10;
        }
        this.gameScore.dataSource = data;
    };
    GameTopPanel.prototype.onDisable = function () {
    };
    GameTopPanel.prototype.onUpdateScoreHandler = function (type) {
        console.log('onUpdateScoreHandler ');
        this.setScore(type);
    };
    GameTopPanel.prototype.onLoop = function () {
        this.chanceTime.value -= (1 / 90);
        if (this.chanceTime.value <= 0) {
            console.log('game over ');
            Laya.timer.clear(this, this.onLoop);
            Laya.Scene.open("Scene/GameStart.scene");
            return;
        }
    };
    return GameTopPanel;
}(Laya.Script));
exports.default = GameTopPanel;
},{"../manger/ListenerManger":6}],5:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var ListenerManger_1 = require("../manger/ListenerManger");
var HannerMgr = /** @class */ (function (_super) {
    __extends(HannerMgr, _super);
    function HannerMgr() {
        return _super.call(this) || this;
    }
    HannerMgr.prototype.onEnable = function () {
        ListenerManger_1.ListenerMgr.Instance().on('onHammerHit', this, this.onHammerPlay);
        ListenerManger_1.ListenerMgr.Instance().on('onHammerMove', this, this.onHammerMove);
    };
    HannerMgr.prototype.onStart = function () {
        var effect = Laya.Pool.getItemByCreateFun("HammnerAnim", this.createAnim, this);
        // let effect = Laya.Pool.getItemByCreateFun("CrabAnim", this.createAnim, this);
        this.owner.addChild(effect);
        this.hammer = effect;
        this.hammer.play(0, false);
        // this.hammer.play(0, true);
        this.hammer.pos(-100, -100);
    };
    HannerMgr.prototype.onHammerPlay = function () {
        this.hammer && this.hammer.play(0, false);
    };
    HannerMgr.prototype.onHammerMove = function (pos) {
        this.hammer && this.hammer.pos(pos.x, pos.y);
    };
    HannerMgr.prototype.createAnim = function () {
        var resPath = "Anims/Hammer.ani";
        var ani = new Laya.Animation();
        ani.loadAnimation(resPath);
        return ani;
    };
    HannerMgr.prototype.onMouseDown = function (data) {
        this.onHammerPlay();
        ListenerManger_1.ListenerMgr.Instance().event('onHammerHit', this.hammer);
    };
    HannerMgr.prototype.onMouseMove = function (data) {
        this.onHammerMove(new Laya.Point(data.stageX, data.stageY));
    };
    HannerMgr.prototype.onDisable = function () {
        ListenerManger_1.ListenerMgr.Instance().offAllCaller(this);
    };
    return HannerMgr;
}(Laya.Script));
exports.default = HannerMgr;
},{"../manger/ListenerManger":6}],6:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var ListenerMgr = /** @class */ (function (_super) {
    __extends(ListenerMgr, _super);
    function ListenerMgr() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ListenerMgr.Instance = function () {
        return this.instance;
    };
    ListenerMgr.instance = new Laya.EventDispatcher();
    return ListenerMgr;
}(Laya.EventDispatcher));
exports.ListenerMgr = ListenerMgr;
},{}],7:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameModel = /** @class */ (function () {
    function GameModel() {
    }
    GameModel.Instacne = function () {
        if (!GameModel.instance) {
            GameModel.instance = new GameModel();
        }
        return GameModel.instance;
    };
    Object.defineProperty(GameModel.prototype, "curMouseType", {
        get: function () {
            return this._curMouseType;
        },
        set: function (type) {
            this._curMouseType = type;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GameModel.prototype, "curHoleIdx", {
        get: function () {
            return this._curHoleIdx;
        },
        set: function (idx) {
            this._curHoleIdx = idx;
        },
        enumerable: true,
        configurable: true
    });
    GameModel.prototype.getHearCount = function () {
        return this._hearCount;
    };
    GameModel.prototype.hearCountMinus = function () {
        this._hearCount--;
        if (this._hearCount < 0) {
            this._hearCount = 0;
        }
    };
    Object.defineProperty(GameModel.prototype, "gameScore", {
        get: function () {
            return this._gameScore;
        },
        set: function (num) {
            this._gameScore = num;
        },
        enumerable: true,
        configurable: true
    });
    return GameModel;
}());
exports.default = GameModel;
},{}],8:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var LayerEnum;
(function (LayerEnum) {
    LayerEnum[LayerEnum["loginLayer"] = 0] = "loginLayer";
    LayerEnum[LayerEnum["gameLayer"] = 1] = "gameLayer";
    LayerEnum[LayerEnum["gameOerLayer"] = 2] = "gameOerLayer";
})(LayerEnum || (LayerEnum = {}));
var LayerNameMap = {
    1: "",
    2: "",
    3: ''
};
var MainScene = /** @class */ (function (_super) {
    __extends(MainScene, _super);
    function MainScene() {
        return _super.call(this) || this;
    }
    MainScene.prototype.onEnable = function () {
    };
    MainScene.prototype.onDisable = function () {
    };
    MainScene.prototype.onClick = function () {
        Laya.Scene.open("Scene/GameMain.scene");
    };
    MainScene.prototype.onStart = function () {
    };
    MainScene.prototype.startGame = function () {
    };
    return MainScene;
}(Laya.Script));
exports.default = MainScene;
},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLzM2MOaegemAn+a1j+iniOWZqOS4i+i9vS9MYXlhQWlySURFX2JldGEvcmVzb3VyY2VzL2FwcC9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwic3JjL0dhbWVDb25maWcudHMiLCJzcmMvTWFpbi50cyIsInNyYy9sYXllci9HYW1lTW91c2VMYXllci50cyIsInNyYy9sYXllci9HYW1lVG9wUGFuZWwudHMiLCJzcmMvbWFuZ2VyL0hhbW1lck1nci50cyIsInNyYy9tYW5nZXIvTGlzdGVuZXJNYW5nZXIudHMiLCJzcmMvbW9kdWxlL0dhbWVNb2RlbC50cyIsInNyYy9zY2VuZS9NYWluU2NlbmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDVkEsZ0dBQWdHO0FBQ2hHLHFEQUErQztBQUMvQyxnREFBMEM7QUFDMUMseURBQW1EO0FBQ25ELCtDQUF5QztBQUN6Qzs7RUFFRTtBQUNGO0lBYUk7SUFBYyxDQUFDO0lBQ1IsZUFBSSxHQUFYO1FBQ0ksSUFBSSxHQUFHLEdBQWEsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUM7UUFDN0MsR0FBRyxDQUFDLHVCQUF1QixFQUFDLHNCQUFZLENBQUMsQ0FBQztRQUMxQyxHQUFHLENBQUMscUJBQXFCLEVBQUMsbUJBQVMsQ0FBQyxDQUFDO1FBQ3JDLEdBQUcsQ0FBQyx5QkFBeUIsRUFBQyx3QkFBYyxDQUFDLENBQUM7UUFDOUMsR0FBRyxDQUFDLG9CQUFvQixFQUFDLG1CQUFTLENBQUMsQ0FBQztJQUN4QyxDQUFDO0lBbkJNLGdCQUFLLEdBQVEsSUFBSSxDQUFDO0lBQ2xCLGlCQUFNLEdBQVEsR0FBRyxDQUFDO0lBQ2xCLG9CQUFTLEdBQVEsWUFBWSxDQUFDO0lBQzlCLHFCQUFVLEdBQVEsWUFBWSxDQUFDO0lBQy9CLGlCQUFNLEdBQVEsUUFBUSxDQUFDO0lBQ3ZCLGlCQUFNLEdBQVEsUUFBUSxDQUFDO0lBQ3ZCLHFCQUFVLEdBQUssdUJBQXVCLENBQUM7SUFDdkMsb0JBQVMsR0FBUSxFQUFFLENBQUM7SUFDcEIsZ0JBQUssR0FBUyxLQUFLLENBQUM7SUFDcEIsZUFBSSxHQUFTLEtBQUssQ0FBQztJQUNuQix1QkFBWSxHQUFTLEtBQUssQ0FBQztJQUMzQiw0QkFBaUIsR0FBUyxJQUFJLENBQUM7SUFTMUMsaUJBQUM7Q0FyQkQsQUFxQkMsSUFBQTtrQkFyQm9CLFVBQVU7QUFzQi9CLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQzs7OztBQzlCbEIsMkNBQXNDO0FBQ3RDO0lBQ0M7UUFDQyxnQkFBZ0I7UUFDaEIsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDO1lBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxvQkFBVSxDQUFDLEtBQUssRUFBRSxvQkFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDOztZQUNsRSxJQUFJLENBQUMsSUFBSSxDQUFDLG9CQUFVLENBQUMsS0FBSyxFQUFFLG9CQUFVLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQ25FLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDNUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNsRCxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxvQkFBVSxDQUFDLFNBQVMsQ0FBQztRQUM1QyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsR0FBRyxvQkFBVSxDQUFDLFVBQVUsQ0FBQztRQUM5QyxvQkFBb0I7UUFDcEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsR0FBRyxvQkFBVSxDQUFDLGlCQUFpQixDQUFDO1FBRTFELG9EQUFvRDtRQUNwRCxJQUFJLG9CQUFVLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxJQUFJLE1BQU07WUFBRSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztRQUM5RixJQUFJLG9CQUFVLENBQUMsWUFBWSxJQUFJLElBQUksQ0FBQyxrQkFBa0IsQ0FBQztZQUFFLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQzNGLElBQUksb0JBQVUsQ0FBQyxJQUFJO1lBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUN0QyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDO1FBRTdCLGdEQUFnRDtRQUNoRCxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsRUFBRSxJQUFJLENBQUMsZUFBZSxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDckksQ0FBQztJQUVELDhCQUFlLEdBQWY7UUFDQywrQ0FBK0M7UUFDL0MsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7SUFDakcsQ0FBQztJQUVELDZCQUFjLEdBQWQ7UUFDQyxZQUFZO1FBQ1osb0JBQVUsQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsb0JBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNqRSxDQUFDO0lBQ0YsV0FBQztBQUFELENBL0JBLEFBK0JDLElBQUE7QUFDRCxPQUFPO0FBQ1AsSUFBSSxJQUFJLEVBQUUsQ0FBQzs7OztBQ2xDWCxpREFBNEM7QUFDNUMsMkRBQXVEO0FBRXZEO0lBQXVDLDZCQUFXO0lBUTlDO1FBQUEsWUFBZ0IsaUJBQU8sU0FBRztRQU5sQixjQUFRLEdBQUcsRUFBRSxDQUFDO1FBRWQsVUFBSSxHQUFHLENBQUMsb0JBQW9CLEVBQUUsb0JBQW9CLENBQUMsQ0FBQztRQUVwRCxhQUFPLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDOztJQUVoQyxDQUFDO0lBRTFCLDRCQUFRLEdBQVI7UUFDSSw0QkFBVyxDQUFDLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxhQUFhLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNwRSxDQUFDO0lBRUQsMkJBQU8sR0FBUDtRQUNJLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUN4QixDQUFDO0lBRUQsZ0NBQVksR0FBWjtRQUNJLElBQUksRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDckMsT0FBTyxFQUFFLElBQUksbUJBQVMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxVQUFVLEVBQUU7WUFDMUMsRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDcEM7UUFDRCxJQUFJLElBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JDLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUV6QixJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRTtZQUNwQixJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO1NBQ3JEO1FBQ0QsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQWUsQ0FBQztRQUM1QyxLQUFLLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFN0IsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN4QixJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBRXpELG1CQUFTLENBQUMsUUFBUSxFQUFFLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztRQUN6QyxtQkFBUyxDQUFDLFFBQVEsRUFBRSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUM7SUFDekMsQ0FBQztJQUVELGtDQUFjLEdBQWQsVUFBZSxFQUFFLEVBQUUsSUFBSTtRQUNuQixJQUFJLFNBQVMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFDN0QsSUFBSSxFQUFFLEdBQUcsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUV4QyxJQUFJLEtBQUssR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQzVDLEtBQUssQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ2hCLEVBQUUsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkIsT0FBTyxLQUFLLENBQUM7SUFDakIsQ0FBQztJQUVELCtCQUFXLEdBQVgsVUFBWSxNQUFrQjtRQUMxQixNQUFNLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztRQUN0QixJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDekMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztJQUMxRSxDQUFDO0lBRUQsd0NBQW9CLEdBQXBCO1FBQ0ksSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQTtJQUM5QyxDQUFDO0lBRUQsaUNBQWEsR0FBYixVQUFjLE1BQWtCO1FBQWhDLGlCQU1DO1FBTEcsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ3JDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFO1lBQ25GLE1BQU0sQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO1lBQ3ZCLEtBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUN4QixDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUNiLENBQUM7SUFFRCw0QkFBUSxHQUFSLFVBQVMsTUFBc0I7UUFDM0IsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUMxQixJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBZSxDQUFDO1lBQzNDLElBQUksQ0FBQyxLQUFLO2dCQUFFLFNBQVM7WUFDckIsSUFBSSxZQUFZLEdBQUcsS0FBSyxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ3JDLElBQUksU0FBUyxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzFELFlBQVksQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUM3QixZQUFZLENBQUMsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUM7WUFDN0IsSUFBSSxLQUFLLEdBQUcsWUFBWSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUM5QyxJQUFJLEtBQUs7Z0JBQUUsT0FBTyxDQUFDLENBQUM7U0FDdkI7UUFDRCxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQ2QsQ0FBQztJQUVELGdDQUFZLEdBQVosVUFBYSxNQUFrQjtRQUMzQixNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNiLE1BQU0sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxtQkFBUyxDQUFDLFFBQVEsRUFBRSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQ2xFLENBQUM7SUFFRCw4QkFBVSxHQUFWLFVBQVcsTUFBbUI7UUFDMUIsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQztRQUM1QyxPQUFPLENBQUMsR0FBRyxDQUFDLGtCQUFrQixFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ3JDLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDL0IsS0FBSyxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFbEMsNEJBQVcsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxLQUFLLENBQUMsa0JBQWtCLEVBQUMsbUJBQVMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxZQUFZLENBQUMsQ0FBQTtJQUN0RixDQUFDO0lBRUQsNkJBQVMsR0FBVDtRQUNJLDRCQUFXLENBQUMsUUFBUSxFQUFFLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzlDLENBQUM7SUFDTCxnQkFBQztBQUFELENBbEdBLEFBa0dDLENBbEdzQyxJQUFJLENBQUMsTUFBTSxHQWtHakQ7Ozs7O0FDckdELDJEQUF1RDtBQUV2RDtJQUEwQyxnQ0FBVztJQU9qRDtlQUFnQixpQkFBTztJQUFFLENBQUM7SUFFMUIsK0JBQVEsR0FBUjtRQUNJLDRCQUFXLENBQUMsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDLGtCQUFrQixFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQztJQUNuRixDQUFDO0lBRUQsOEJBQU8sR0FBUDtRQUNJLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFxQixDQUFDO1FBQzlFLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFhLENBQUM7UUFFaEUsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7UUFDZixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDZCxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUMsSUFBSSxFQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUMzQyxDQUFDO0lBRUQsNkJBQU0sR0FBTjtRQUNJLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDdEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNqQixJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDekIsQ0FBQztJQUdELG9DQUFhLEdBQWIsVUFBYyxJQUFZO1FBQ3RCLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztJQUNqQyxDQUFDO0lBRUQsK0JBQVEsR0FBUixVQUFTLElBQVk7UUFDakIsSUFBSSxDQUFDLEtBQUssSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN2QyxJQUFJLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQztZQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ25DLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN6QixDQUFDO0lBRUQsb0NBQWEsR0FBYjtRQUNJLElBQUksSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUNkLElBQUksSUFBSSxHQUFXLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDOUIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3pCLElBQUksQ0FBQyxRQUFNLENBQUcsQ0FBQyxHQUFHLEVBQUUsS0FBSyxFQUFFLElBQUksR0FBRyxFQUFFLEVBQUUsQ0FBQztZQUN2QyxJQUFJLElBQUksRUFBRSxDQUFDO1NBQ2Q7UUFDRCxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7SUFDckMsQ0FBQztJQUVELGdDQUFTLEdBQVQ7SUFDQSxDQUFDO0lBRUQsMkNBQW9CLEdBQXBCLFVBQXFCLElBQVc7UUFFNUIsT0FBTyxDQUFDLEdBQUcsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO1FBQ3JDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDeEIsQ0FBQztJQUVELDZCQUFNLEdBQU47UUFDSSxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsR0FBQyxFQUFFLENBQUMsQ0FBQztRQUNoQyxJQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxJQUFFLENBQUMsRUFBQztZQUN4QixPQUFPLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDO1lBQzFCLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksRUFBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDbkMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsdUJBQXVCLENBQUMsQ0FBQztZQUN6QyxPQUFPO1NBQ1Y7SUFDTCxDQUFDO0lBQ0wsbUJBQUM7QUFBRCxDQW5FQSxBQW1FQyxDQW5FeUMsSUFBSSxDQUFDLE1BQU0sR0FtRXBEOzs7OztBQ3JFRCwyREFBdUQ7QUFFdkQ7SUFBdUMsNkJBQVc7SUFJOUM7ZUFBZ0IsaUJBQU87SUFBRSxDQUFDO0lBRTFCLDRCQUFRLEdBQVI7UUFDSSw0QkFBVyxDQUFDLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxhQUFhLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNsRSw0QkFBVyxDQUFDLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxjQUFjLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUN2RSxDQUFDO0lBRUQsMkJBQU8sR0FBUDtRQUNJLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDaEYsZ0ZBQWdGO1FBQ2hGLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzVCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUMzQiw2QkFBNkI7UUFDN0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNoQyxDQUFDO0lBRUQsZ0NBQVksR0FBWjtRQUNJLElBQUksQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQzlDLENBQUM7SUFFRCxnQ0FBWSxHQUFaLFVBQWEsR0FBZTtRQUN4QixJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2pELENBQUM7SUFFRCw4QkFBVSxHQUFWO1FBQ0ksSUFBSSxPQUFPLEdBQUcsa0JBQWtCLENBQUM7UUFDakMsSUFBSSxHQUFHLEdBQW1CLElBQUksSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1FBQy9DLEdBQUcsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDM0IsT0FBTyxHQUFHLENBQUM7SUFDZixDQUFDO0lBRUQsK0JBQVcsR0FBWCxVQUFZLElBQWdCO1FBQ3hCLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUNwQiw0QkFBVyxDQUFDLFFBQVEsRUFBRSxDQUFDLEtBQUssQ0FBQyxhQUFhLEVBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFBO0lBQzNELENBQUM7SUFFRCwrQkFBVyxHQUFYLFVBQVksSUFBZ0I7UUFDeEIsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUNoRSxDQUFDO0lBRUQsNkJBQVMsR0FBVDtRQUNJLDRCQUFXLENBQUMsUUFBUSxFQUFFLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzlDLENBQUM7SUFDTCxnQkFBQztBQUFELENBaERBLEFBZ0RDLENBaERzQyxJQUFJLENBQUMsTUFBTSxHQWdEakQ7Ozs7O0FDaEREO0lBQWlDLCtCQUFvQjtJQUFyRDs7SUFRQSxDQUFDO0lBSmlCLG9CQUFRLEdBQXRCO1FBQ0ksT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3pCLENBQUM7SUFKYyxvQkFBUSxHQUF5QixJQUFJLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQU0vRSxrQkFBQztDQVJELEFBUUMsQ0FSZ0MsSUFBSSxDQUFDLGVBQWUsR0FRcEQ7QUFSWSxrQ0FBVzs7OztBQ0R4QjtJQUlJO0lBRUEsQ0FBQztJQUVhLGtCQUFRLEdBQXRCO1FBQ0ksSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEVBQUU7WUFDckIsU0FBUyxDQUFDLFFBQVEsR0FBRyxJQUFJLFNBQVMsRUFBRSxDQUFDO1NBQ3hDO1FBQ0QsT0FBTyxTQUFTLENBQUMsUUFBUSxDQUFDO0lBQzlCLENBQUM7SUFJRCxzQkFBVyxtQ0FBWTthQUF2QjtZQUNJLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQztRQUM5QixDQUFDO2FBRUQsVUFBd0IsSUFBWTtZQUNoQyxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztRQUM5QixDQUFDOzs7T0FKQTtJQVFELHNCQUFXLGlDQUFVO2FBQXJCO1lBQ0ksT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDO1FBQzVCLENBQUM7YUFFRCxVQUFzQixHQUFHO1lBQ3JCLElBQUksQ0FBQyxXQUFXLEdBQUcsR0FBRyxDQUFDO1FBQzNCLENBQUM7OztPQUpBO0lBUU0sZ0NBQVksR0FBbkI7UUFDSSxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDM0IsQ0FBQztJQUVNLGtDQUFjLEdBQXJCO1FBQ0ksSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ2xCLElBQUksSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLEVBQUU7WUFDckIsSUFBSSxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUM7U0FDdkI7SUFDTCxDQUFDO0lBSUQsc0JBQVcsZ0NBQVM7YUFBcEI7WUFDSSxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7UUFDM0IsQ0FBQzthQUVELFVBQXFCLEdBQVc7WUFDNUIsSUFBSSxDQUFDLFVBQVUsR0FBRyxHQUFHLENBQUM7UUFDMUIsQ0FBQzs7O09BSkE7SUFPTCxnQkFBQztBQUFELENBM0RBLEFBMkRDLElBQUE7Ozs7O0FDMURELElBQUssU0FJSjtBQUpELFdBQUssU0FBUztJQUNWLHFEQUFjLENBQUE7SUFDZCxtREFBUyxDQUFBO0lBQ1QseURBQVksQ0FBQTtBQUNoQixDQUFDLEVBSkksU0FBUyxLQUFULFNBQVMsUUFJYjtBQUNELElBQU0sWUFBWSxHQUFHO0lBQ2pCLENBQUMsRUFBRSxFQUFFO0lBQ0wsQ0FBQyxFQUFFLEVBQUU7SUFDTCxDQUFDLEVBQUUsRUFBRTtDQUNSLENBQUE7QUFDRDtJQUF1Qyw2QkFBVztJQUk5QztlQUNJLGlCQUFPO0lBQ1gsQ0FBQztJQUVELDRCQUFRLEdBQVI7SUFDQSxDQUFDO0lBRUQsNkJBQVMsR0FBVDtJQUNBLENBQUM7SUFFRCwyQkFBTyxHQUFQO1FBQ0ksSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBRUQsMkJBQU8sR0FBUDtJQUVBLENBQUM7SUFFRCw2QkFBUyxHQUFUO0lBR0EsQ0FBQztJQUNMLGdCQUFDO0FBQUQsQ0ExQkEsQUEwQkMsQ0ExQnNDLElBQUksQ0FBQyxNQUFNLEdBMEJqRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvKipUaGlzIGNsYXNzIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IExheWFBaXJJREUsIHBsZWFzZSBkbyBub3QgbWFrZSBhbnkgbW9kaWZpY2F0aW9ucy4gKi9cclxuaW1wb3J0IEdhbWVUb3BQYW5lbCBmcm9tIFwiLi9sYXllci9HYW1lVG9wUGFuZWxcIlxuaW1wb3J0IEhhbW1lck1nciBmcm9tIFwiLi9tYW5nZXIvSGFtbWVyTWdyXCJcbmltcG9ydCBHYW1lTW91c2VMYXllciBmcm9tIFwiLi9sYXllci9HYW1lTW91c2VMYXllclwiXG5pbXBvcnQgTWFpblNjZW5lIGZyb20gXCIuL3NjZW5lL01haW5TY2VuZVwiXHJcbi8qXHJcbiog5ri45oiP5Yid5aeL5YyW6YWN572uO1xyXG4qL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lQ29uZmlne1xyXG4gICAgc3RhdGljIHdpZHRoOm51bWJlcj0xMTM2O1xyXG4gICAgc3RhdGljIGhlaWdodDpudW1iZXI9NjQwO1xyXG4gICAgc3RhdGljIHNjYWxlTW9kZTpzdHJpbmc9XCJmaXhlZHdpZHRoXCI7XHJcbiAgICBzdGF0aWMgc2NyZWVuTW9kZTpzdHJpbmc9XCJob3Jpem9udGFsXCI7XHJcbiAgICBzdGF0aWMgYWxpZ25WOnN0cmluZz1cIm1pZGRsZVwiO1xyXG4gICAgc3RhdGljIGFsaWduSDpzdHJpbmc9XCJjZW50ZXJcIjtcclxuICAgIHN0YXRpYyBzdGFydFNjZW5lOmFueT1cIlNjZW5lL0dhbWVTdGFydC5zY2VuZVwiO1xyXG4gICAgc3RhdGljIHNjZW5lUm9vdDpzdHJpbmc9XCJcIjtcclxuICAgIHN0YXRpYyBkZWJ1Zzpib29sZWFuPWZhbHNlO1xyXG4gICAgc3RhdGljIHN0YXQ6Ym9vbGVhbj1mYWxzZTtcclxuICAgIHN0YXRpYyBwaHlzaWNzRGVidWc6Ym9vbGVhbj1mYWxzZTtcclxuICAgIHN0YXRpYyBleHBvcnRTY2VuZVRvSnNvbjpib29sZWFuPXRydWU7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe31cclxuICAgIHN0YXRpYyBpbml0KCl7XHJcbiAgICAgICAgdmFyIHJlZzogRnVuY3Rpb24gPSBMYXlhLkNsYXNzVXRpbHMucmVnQ2xhc3M7XHJcbiAgICAgICAgcmVnKFwibGF5ZXIvR2FtZVRvcFBhbmVsLnRzXCIsR2FtZVRvcFBhbmVsKTtcbiAgICAgICAgcmVnKFwibWFuZ2VyL0hhbW1lck1nci50c1wiLEhhbW1lck1ncik7XG4gICAgICAgIHJlZyhcImxheWVyL0dhbWVNb3VzZUxheWVyLnRzXCIsR2FtZU1vdXNlTGF5ZXIpO1xuICAgICAgICByZWcoXCJzY2VuZS9NYWluU2NlbmUudHNcIixNYWluU2NlbmUpO1xyXG4gICAgfVxyXG59XHJcbkdhbWVDb25maWcuaW5pdCgpOyIsImltcG9ydCBHYW1lQ29uZmlnIGZyb20gXCIuL0dhbWVDb25maWdcIjtcclxuY2xhc3MgTWFpbiB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHQvL+agueaNrklEReiuvue9ruWIneWni+WMluW8leaTjlx0XHRcclxuXHRcdGlmICh3aW5kb3dbXCJMYXlhM0RcIl0pIExheWEzRC5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0KTtcclxuXHRcdGVsc2UgTGF5YS5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0LCBMYXlhW1wiV2ViR0xcIl0pO1xyXG5cdFx0TGF5YVtcIlBoeXNpY3NcIl0gJiYgTGF5YVtcIlBoeXNpY3NcIl0uZW5hYmxlKCk7XHJcblx0XHRMYXlhW1wiRGVidWdQYW5lbFwiXSAmJiBMYXlhW1wiRGVidWdQYW5lbFwiXS5lbmFibGUoKTtcclxuXHRcdExheWEuc3RhZ2Uuc2NhbGVNb2RlID0gR2FtZUNvbmZpZy5zY2FsZU1vZGU7XHJcblx0XHRMYXlhLnN0YWdlLnNjcmVlbk1vZGUgPSBHYW1lQ29uZmlnLnNjcmVlbk1vZGU7XHJcblx0XHQvL+WFvOWuueW+ruS/oeS4jeaUr+aMgeWKoOi9vXNjZW5l5ZCO57yA5Zy65pmvXHJcblx0XHRMYXlhLlVSTC5leHBvcnRTY2VuZVRvSnNvbiA9IEdhbWVDb25maWcuZXhwb3J0U2NlbmVUb0pzb247XHJcblxyXG5cdFx0Ly/miZPlvIDosIPor5XpnaLmnb/vvIjpgJrov4dJREXorr7nva7osIPor5XmqKHlvI/vvIzmiJbogIV1cmzlnLDlnYDlop7liqBkZWJ1Zz10cnVl5Y+C5pWw77yM5Z2H5Y+v5omT5byA6LCD6K+V6Z2i5p2/77yJXHJcblx0XHRpZiAoR2FtZUNvbmZpZy5kZWJ1ZyB8fCBMYXlhLlV0aWxzLmdldFF1ZXJ5U3RyaW5nKFwiZGVidWdcIikgPT0gXCJ0cnVlXCIpIExheWEuZW5hYmxlRGVidWdQYW5lbCgpO1xyXG5cdFx0aWYgKEdhbWVDb25maWcucGh5c2ljc0RlYnVnICYmIExheWFbXCJQaHlzaWNzRGVidWdEcmF3XCJdKSBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXS5lbmFibGUoKTtcclxuXHRcdGlmIChHYW1lQ29uZmlnLnN0YXQpIExheWEuU3RhdC5zaG93KCk7XHJcblx0XHRMYXlhLmFsZXJ0R2xvYmFsRXJyb3IgPSB0cnVlO1xyXG5cclxuXHRcdC8v5r+A5rS76LWE5rqQ54mI5pys5o6n5Yi277yMdmVyc2lvbi5qc29u55SxSURF5Y+R5biD5Yqf6IO96Ieq5Yqo55Sf5oiQ77yM5aaC5p6c5rKh5pyJ5Lmf5LiN5b2x5ZON5ZCO57ut5rWB56iLXHJcblx0XHRMYXlhLlJlc291cmNlVmVyc2lvbi5lbmFibGUoXCJ2ZXJzaW9uLmpzb25cIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLm9uVmVyc2lvbkxvYWRlZCksIExheWEuUmVzb3VyY2VWZXJzaW9uLkZJTEVOQU1FX1ZFUlNJT04pO1xyXG5cdH1cclxuXHJcblx0b25WZXJzaW9uTG9hZGVkKCk6IHZvaWQge1xyXG5cdFx0Ly/mv4DmtLvlpKflsI/lm77mmKDlsITvvIzliqDovb3lsI/lm77nmoTml7blgJnvvIzlpoLmnpzlj5HnjrDlsI/lm77lnKjlpKflm77lkIjpm4bph4zpnaLvvIzliJnkvJjlhYjliqDovb3lpKflm77lkIjpm4bvvIzogIzkuI3mmK/lsI/lm75cclxuXHRcdExheWEuQXRsYXNJbmZvTWFuYWdlci5lbmFibGUoXCJmaWxlY29uZmlnLmpzb25cIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLm9uQ29uZmlnTG9hZGVkKSk7XHJcblx0fVxyXG5cclxuXHRvbkNvbmZpZ0xvYWRlZCgpOiB2b2lkIHtcclxuXHRcdC8v5Yqg6L29SURF5oyH5a6a55qE5Zy65pmvXHJcblx0XHRHYW1lQ29uZmlnLnN0YXJ0U2NlbmUgJiYgTGF5YS5TY2VuZS5vcGVuKEdhbWVDb25maWcuc3RhcnRTY2VuZSk7XHJcblx0fVxyXG59XHJcbi8v5r+A5rS75ZCv5Yqo57G7XHJcbm5ldyBNYWluKCk7XHJcbiIsImltcG9ydCBHYW1lTW9kZWwgZnJvbSBcIi4uL21vZHVsZS9HYW1lTW9kZWxcIjtcclxuaW1wb3J0IHsgTGlzdGVuZXJNZ3IgfSBmcm9tIFwiLi4vbWFuZ2VyL0xpc3RlbmVyTWFuZ2VyXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lTGF5ZXIgZXh0ZW5kcyBMYXlhLlNjcmlwdCB7XHJcblxyXG4gICAgcHJpdmF0ZSBtb3VzZUFyciA9IFtdO1xyXG5cclxuICAgIHByaXZhdGUgc2tpcyA9IFsndWkvcHhfbm9ybWFsXzEucG5nJywgJ3VpL3B4X25vcm1hbF8yLnBuZyddO1xyXG5cclxuICAgIHByaXZhdGUgaGl0U2tpcyA9IFsndWkvcHhfaGl0XzEucG5nJywgJ3VpL3B4X2hpdF8yLnBuZyddO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkgeyBzdXBlcigpOyB9XHJcblxyXG4gICAgb25FbmFibGUoKTogdm9pZCB7XHJcbiAgICAgICAgTGlzdGVuZXJNZ3IuSW5zdGFuY2UoKS5vbignb25IYW1tZXJIaXQnLCB0aGlzLCB0aGlzLm9uQ2hlY2tIaXQpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uU3RhcnQoKSB7XHJcbiAgICAgICAgdGhpcy5tb3VzZUJpcnRoQUkoKTtcclxuICAgIH1cclxuXHJcbiAgICBtb3VzZUJpcnRoQUkoKSB7XHJcbiAgICAgICAgbGV0IGlkID0gKE1hdGgucmFuZG9tKCkgKiA5ICsgMSkgfCAwO1xyXG4gICAgICAgIHdoaWxlIChpZCA9PSBHYW1lTW9kZWwuSW5zdGFjbmUoKS5jdXJIb2xlSWR4KSB7XHJcbiAgICAgICAgICAgIGlkID0gKE1hdGgucmFuZG9tKCkgKiA5ICsgMSkgfCAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdHlwZSA9ICgoTWF0aC5yYW5kb20oKSAqIDQpIHwgMCk7XHJcbiAgICAgICAgdHlwZSA9IHR5cGUgPT0gMCA/IDEgOiAwO1xyXG5cclxuICAgICAgICBpZiAoIXRoaXMubW91c2VBcnJbaWRdKSB7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2VBcnJbaWRdID0gdGhpcy5tb3VzQ3JlYXRlQnlJZChpZCwgdHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBtb3VzZSA9IHRoaXMubW91c2VBcnJbaWRdIGFzIExheWEuSW1hZ2U7XHJcbiAgICAgICAgbW91c2Uuc2tpbiA9IHRoaXMuc2tpc1t0eXBlXTtcclxuXHJcbiAgICAgICAgdGhpcy5tb3VzZVVwQW5pbShtb3VzZSk7XHJcbiAgICAgICAgTGF5YS50aW1lci5vbmNlKDE1MDAsIHRoaXMsIHRoaXMubW91c2VEb3duQW5pbSwgW21vdXNlXSk7XHJcblxyXG4gICAgICAgIEdhbWVNb2RlbC5JbnN0YWNuZSgpLmN1ck1vdXNlVHlwZSA9IHR5cGU7XHJcbiAgICAgICAgR2FtZU1vZGVsLkluc3RhY25lKCkuY3VySG9sZUlkeCA9IGlkO1xyXG4gICAgfVxyXG5cclxuICAgIG1vdXNDcmVhdGVCeUlkKGlkLCB0eXBlKSB7XHJcbiAgICAgICAgbGV0IG1vdXNlSXRlbSA9IHRoaXMub3duZXIuZ2V0Q2hpbGRCeU5hbWUoJ21vdXNlSXRlbV8nICsgaWQpO1xyXG4gICAgICAgIGxldCBiZyA9IG1vdXNlSXRlbS5nZXRDaGlsZEJ5TmFtZSgnYmcnKTtcclxuXHJcbiAgICAgICAgbGV0IG1vdXNlID0gbmV3IExheWEuSW1hZ2UodGhpcy5za2lzW3R5cGVdKTtcclxuICAgICAgICBtb3VzZS5hbHBoYSA9IDA7XHJcbiAgICAgICAgYmcuYWRkQ2hpbGQobW91c2UpO1xyXG4gICAgICAgIHJldHVybiBtb3VzZTtcclxuICAgIH1cclxuXHJcbiAgICBtb3VzZVVwQW5pbShjZWxsZXI6IExheWEuSW1hZ2UpIHtcclxuICAgICAgICBjZWxsZXIudmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgTGF5YS5Ud2Vlbi50byhjZWxsZXIsIHsgYWxwaGE6IDEgfSwgMTAwKTtcclxuICAgICAgICBMYXlhLlR3ZWVuLnRvKGNlbGxlciwgeyB5OiAtMjMgfSwgMjAwLCBMYXlhLkVhc2UubGluZWFySW4sIG51bGwsIDEwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RvcE1vdXNlRG93blRpbWVvdXQoKSB7XHJcbiAgICAgICAgTGF5YS50aW1lci5jbGVhcih0aGlzLCB0aGlzLm1vdXNlRG93bkFuaW0pXHJcbiAgICB9XHJcblxyXG4gICAgbW91c2VEb3duQW5pbShjZWxsZXI6IExheWEuSW1hZ2UpIHtcclxuICAgICAgICBMYXlhLlR3ZWVuLnRvKGNlbGxlciwgeyB5OiAwIH0sIDIwMCk7XHJcbiAgICAgICAgTGF5YS5Ud2Vlbi50byhjZWxsZXIsIHsgYWxwaGE6IDAgfSwgMTAwLCBMYXlhLkVhc2UubGluZWFySW4sIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjZWxsZXIudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLm1vdXNlQmlydGhBSSgpO1xyXG4gICAgICAgIH0pLCAyMDApO1xyXG4gICAgfVxyXG5cclxuICAgIGNoZWNrSGl0KGJvdW5kczogTGF5YS5SZWN0YW5nbGUpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSAxMDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBtb3VzZSA9IHRoaXMubW91c2VBcnJbaV0gYXMgTGF5YS5JbWFnZTtcclxuICAgICAgICAgICAgaWYgKCFtb3VzZSkgY29udGludWU7XHJcbiAgICAgICAgICAgIGxldCB0YXJnZXRCb3VuZHMgPSBtb3VzZS5nZXRCb3VuZHMoKTtcclxuICAgICAgICAgICAgbGV0IGdsb2JhbFBvcyA9IG1vdXNlLmxvY2FsVG9HbG9iYWwobmV3IExheWEuUG9pbnQoMCwgMCkpO1xyXG4gICAgICAgICAgICB0YXJnZXRCb3VuZHMueCA9IGdsb2JhbFBvcy54O1xyXG4gICAgICAgICAgICB0YXJnZXRCb3VuZHMueSA9IGdsb2JhbFBvcy55O1xyXG4gICAgICAgICAgICBsZXQgaXNIaXQgPSB0YXJnZXRCb3VuZHMuaW50ZXJzZWN0aW9uKGJvdW5kcyk7XHJcbiAgICAgICAgICAgIGlmIChpc0hpdCkgcmV0dXJuIGk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgIH1cclxuXHJcbiAgICBoaXRNb3VzZUFuaW0oY2VsbGVyOiBMYXlhLkltYWdlKSB7XHJcbiAgICAgICAgY2VsbGVyLnkgPSAwO1xyXG4gICAgICAgIGNlbGxlci5za2luID0gdGhpcy5oaXRTa2lzW0dhbWVNb2RlbC5JbnN0YWNuZSgpLmN1ck1vdXNlVHlwZV07XHJcbiAgICB9XHJcblxyXG4gICAgb25DaGVja0hpdChoYW1tZXI6IExheWEuU3ByaXRlKSB7XHJcbiAgICAgICAgbGV0IGlkeCA9IHRoaXMuY2hlY2tIaXQoaGFtbWVyLmdldEJvdW5kcygpKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnaGl0IG1vdXNlIE5vIGlzICcsIGlkeCk7XHJcbiAgICAgICAgbGV0IG1vdXNlID0gdGhpcy5tb3VzZUFycltpZHhdO1xyXG4gICAgICAgIG1vdXNlICYmIHRoaXMuaGl0TW91c2VBbmltKG1vdXNlKTtcclxuXHJcbiAgICAgICAgTGlzdGVuZXJNZ3IuSW5zdGFuY2UoKS5ldmVudCgnb25VcGRhdGVTY29yZU1ncicsR2FtZU1vZGVsLkluc3RhY25lKCkuY3VyTW91c2VUeXBlKVxyXG4gICAgfVxyXG5cclxuICAgIG9uRGlzYWJsZSgpOiB2b2lkIHtcclxuICAgICAgICBMaXN0ZW5lck1nci5JbnN0YW5jZSgpLm9mZkFsbENhbGxlcih0aGlzKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IExpc3RlbmVyTWdyIH0gZnJvbSBcIi4uL21hbmdlci9MaXN0ZW5lck1hbmdlclwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZVRvcFBhbmVsIGV4dGVuZHMgTGF5YS5TY3JpcHQge1xyXG5cclxuICAgIHByaXZhdGUgY2hhbmNlVGltZTogTGF5YS5Qcm9ncmVzc0JhcjtcclxuXHJcbiAgICBwcml2YXRlIGdhbWVTY29yZTogTGF5YS5Cb3g7XHJcbiAgICBwcml2YXRlIHNjb3JlOiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7IHN1cGVyKCk7IH1cclxuXHJcbiAgICBvbkVuYWJsZSgpOiB2b2lkIHtcclxuICAgICAgICBMaXN0ZW5lck1nci5JbnN0YW5jZSgpLm9uKCdvblVwZGF0ZVNjb3JlTWdyJywgdGhpcywgdGhpcy5vblVwZGF0ZVNjb3JlSGFuZGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgb25TdGFydCgpIHtcclxuICAgICAgICB0aGlzLmNoYW5jZVRpbWUgPSB0aGlzLm93bmVyLmdldENoaWxkQnlOYW1lKCdjaGFuY2VUaW1lJykgYXMgTGF5YS5Qcm9ncmVzc0JhcjtcclxuICAgICAgICB0aGlzLmdhbWVTY29yZSA9IHRoaXMub3duZXIuZ2V0Q2hpbGRCeU5hbWUoJ3Njb3JlJykgYXMgTGF5YS5Cb3g7XHJcblxyXG4gICAgICAgIHRoaXMuc2NvcmUgPSAwO1xyXG4gICAgICAgIHRoaXMuaW5pdFVJKCk7XHJcbiAgICAgICAgTGF5YS50aW1lci5sb29wKDEwMDAsdGhpcyx0aGlzLm9uTG9vcCk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdFVJKCkge1xyXG4gICAgICAgIHRoaXMuc2V0Q2hhbmNlVGltZSgxKTtcclxuICAgICAgICB0aGlzLnNldFNjb3JlKDApO1xyXG4gICAgICAgIHRoaXMudXBkYXRlU2NvcmVVSSgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzZXRDaGFuY2VUaW1lKG51bWI6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuY2hhbmNlVGltZS52YWx1ZSA9IG51bWI7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0U2NvcmUodHlwZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zY29yZSArPSAodHlwZSA9PSAwID8gLTEwMCA6IDEwMCk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2NvcmUgPCAwKSB0aGlzLnNjb3JlID0gMDtcclxuICAgICAgICB0aGlzLnVwZGF0ZVNjb3JlVUkoKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVTY29yZVVJKCkge1xyXG4gICAgICAgIGxldCBkYXRhID0ge307XHJcbiAgICAgICAgdmFyIHRlbXA6IG51bWJlciA9IHRoaXMuc2NvcmU7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDk7IGkgPiAtMTsgaS0tKSB7XHJcbiAgICAgICAgICAgIGRhdGFbYG51bSR7aX1gXSA9IHsgaW5kZXg6IHRlbXAgJSAxMCB9O1xyXG4gICAgICAgICAgICB0ZW1wIC89IDEwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmdhbWVTY29yZS5kYXRhU291cmNlID0gZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBvbkRpc2FibGUoKTogdm9pZCB7XHJcbiAgICB9XHJcblxyXG4gICAgb25VcGRhdGVTY29yZUhhbmRsZXIodHlwZTpudW1iZXIpIHtcclxuICAgICAgICBcclxuICAgICAgICBjb25zb2xlLmxvZygnb25VcGRhdGVTY29yZUhhbmRsZXIgJyk7XHJcbiAgICAgICAgdGhpcy5zZXRTY29yZSh0eXBlKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkxvb3AoKTp2b2lke1xyXG4gICAgICAgIHRoaXMuY2hhbmNlVGltZS52YWx1ZSAtPSAoMS85MCk7XHJcbiAgICAgICAgaWYodGhpcy5jaGFuY2VUaW1lLnZhbHVlPD0wKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2dhbWUgb3ZlciAnKTtcclxuICAgICAgICAgICAgTGF5YS50aW1lci5jbGVhcih0aGlzLHRoaXMub25Mb29wKTtcclxuICAgICAgICAgICAgTGF5YS5TY2VuZS5vcGVuKFwiU2NlbmUvR2FtZVN0YXJ0LnNjZW5lXCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgTGlzdGVuZXJNZ3IgfSBmcm9tIFwiLi4vbWFuZ2VyL0xpc3RlbmVyTWFuZ2VyXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIYW5uZXJNZ3IgZXh0ZW5kcyBMYXlhLlNjcmlwdCB7XHJcblxyXG4gICAgcHJpdmF0ZSBoYW1tZXI6IExheWEuQW5pbWF0aW9uO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkgeyBzdXBlcigpOyB9XHJcblxyXG4gICAgb25FbmFibGUoKTogdm9pZCB7XHJcbiAgICAgICAgTGlzdGVuZXJNZ3IuSW5zdGFuY2UoKS5vbignb25IYW1tZXJIaXQnLCB0aGlzLCB0aGlzLm9uSGFtbWVyUGxheSk7XHJcbiAgICAgICAgTGlzdGVuZXJNZ3IuSW5zdGFuY2UoKS5vbignb25IYW1tZXJNb3ZlJywgdGhpcywgdGhpcy5vbkhhbW1lck1vdmUpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uU3RhcnQoKSB7XHJcbiAgICAgICAgbGV0IGVmZmVjdCA9IExheWEuUG9vbC5nZXRJdGVtQnlDcmVhdGVGdW4oXCJIYW1tbmVyQW5pbVwiLCB0aGlzLmNyZWF0ZUFuaW0sIHRoaXMpO1xyXG4gICAgICAgIC8vIGxldCBlZmZlY3QgPSBMYXlhLlBvb2wuZ2V0SXRlbUJ5Q3JlYXRlRnVuKFwiQ3JhYkFuaW1cIiwgdGhpcy5jcmVhdGVBbmltLCB0aGlzKTtcclxuICAgICAgICB0aGlzLm93bmVyLmFkZENoaWxkKGVmZmVjdCk7XHJcbiAgICAgICAgdGhpcy5oYW1tZXIgPSBlZmZlY3Q7XHJcbiAgICAgICAgdGhpcy5oYW1tZXIucGxheSgwLCBmYWxzZSk7XHJcbiAgICAgICAgLy8gdGhpcy5oYW1tZXIucGxheSgwLCB0cnVlKTtcclxuICAgICAgICB0aGlzLmhhbW1lci5wb3MoLTEwMCwgLTEwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgb25IYW1tZXJQbGF5KCkge1xyXG4gICAgICAgIHRoaXMuaGFtbWVyICYmIHRoaXMuaGFtbWVyLnBsYXkoMCwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uSGFtbWVyTW92ZShwb3M6IExheWEuUG9pbnQpIHtcclxuICAgICAgICB0aGlzLmhhbW1lciAmJiB0aGlzLmhhbW1lci5wb3MocG9zLngsIHBvcy55KTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVBbmltKCk6IExheWEuQW5pbWF0aW9uIHtcclxuICAgICAgICBsZXQgcmVzUGF0aCA9IFwiQW5pbXMvSGFtbWVyLmFuaVwiO1xyXG4gICAgICAgIGxldCBhbmk6IExheWEuQW5pbWF0aW9uID0gbmV3IExheWEuQW5pbWF0aW9uKCk7XHJcbiAgICAgICAgYW5pLmxvYWRBbmltYXRpb24ocmVzUGF0aCk7XHJcbiAgICAgICAgcmV0dXJuIGFuaTtcclxuICAgIH1cclxuXHJcbiAgICBvbk1vdXNlRG93bihkYXRhOiBMYXlhLkV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5vbkhhbW1lclBsYXkoKTtcclxuICAgICAgICBMaXN0ZW5lck1nci5JbnN0YW5jZSgpLmV2ZW50KCdvbkhhbW1lckhpdCcsdGhpcy5oYW1tZXIpXHJcbiAgICB9XHJcblxyXG4gICAgb25Nb3VzZU1vdmUoZGF0YTogTGF5YS5FdmVudCkge1xyXG4gICAgICAgIHRoaXMub25IYW1tZXJNb3ZlKG5ldyBMYXlhLlBvaW50KGRhdGEuc3RhZ2VYLCBkYXRhLnN0YWdlWSkpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uRGlzYWJsZSgpOiB2b2lkIHtcclxuICAgICAgICBMaXN0ZW5lck1nci5JbnN0YW5jZSgpLm9mZkFsbENhbGxlcih0aGlzKTtcclxuICAgIH1cclxufSIsIlxyXG5cclxuZXhwb3J0IGNsYXNzIExpc3RlbmVyTWdyIGV4dGVuZHMgTGF5YS5FdmVudERpc3BhdGNoZXIge1xyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBMYXlhLkV2ZW50RGlzcGF0Y2hlciA9IG5ldyBMYXlhLkV2ZW50RGlzcGF0Y2hlcigpO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgSW5zdGFuY2UoKTogTGlzdGVuZXJNZ3Ige1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlO1xyXG4gICAgfVxyXG4gICBcclxufSIsIlxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lTW9kZWwge1xyXG5cclxuICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBHYW1lTW9kZWw7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgSW5zdGFjbmUoKSB7XHJcbiAgICAgICAgaWYgKCFHYW1lTW9kZWwuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgR2FtZU1vZGVsLmluc3RhbmNlID0gbmV3IEdhbWVNb2RlbCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gR2FtZU1vZGVsLmluc3RhbmNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2N1ck1vdXNlVHlwZTogbnVtYmVyO1xyXG5cclxuICAgIHB1YmxpYyBnZXQgY3VyTW91c2VUeXBlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jdXJNb3VzZVR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBjdXJNb3VzZVR5cGUodHlwZTogbnVtYmVyKSB7XHJcbiAgICAgICAgdGhpcy5fY3VyTW91c2VUeXBlID0gdHlwZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIF9jdXJIb2xlSWR4OiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGdldCBjdXJIb2xlSWR4KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jdXJIb2xlSWR4O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgY3VySG9sZUlkeChpZHgpIHtcclxuICAgICAgICB0aGlzLl9jdXJIb2xlSWR4ID0gaWR4O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX2hlYXJDb3VudDogbnVtYmVyO1xyXG5cclxuICAgIHB1YmxpYyBnZXRIZWFyQ291bnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hlYXJDb3VudDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaGVhckNvdW50TWludXMoKSB7XHJcbiAgICAgICAgdGhpcy5faGVhckNvdW50LS07XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJDb3VudCA8IDApIHtcclxuICAgICAgICAgICAgdGhpcy5faGVhckNvdW50ID0gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBfZ2FtZVNjb3JlOiBudW1iZXI7XHJcblxyXG4gICAgcHVibGljIGdldCBnYW1lU2NvcmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dhbWVTY29yZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IGdhbWVTY29yZShudW06IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuX2dhbWVTY29yZSA9IG51bTtcclxuICAgIH1cclxuICAgIFxyXG5cclxufSIsIlxyXG4gICAgXHJcbmVudW0gTGF5ZXJFbnVtIHtcclxuICAgIGxvZ2luTGF5ZXIgPSAwLFxyXG4gICAgZ2FtZUxheWVyLFxyXG4gICAgZ2FtZU9lckxheWVyXHJcbn1cclxuY29uc3QgTGF5ZXJOYW1lTWFwID0ge1xyXG4gICAgMTogXCJcIixcclxuICAgIDI6IFwiXCIsXHJcbiAgICAzOiAnJ1xyXG59XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1haW5TY2VuZSBleHRlbmRzIExheWEuU2NyaXB0IHtcclxuXHJcbiBcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgXHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkVuYWJsZSgpOiB2b2lkIHtcclxuICAgIH1cclxuXHJcbiAgICBvbkRpc2FibGUoKTogdm9pZCB7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbGljaygpOiB2b2lkIHtcclxuICAgICAgICBMYXlhLlNjZW5lLm9wZW4oXCJTY2VuZS9HYW1lTWFpbi5zY2VuZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBvblN0YXJ0KCkge1xyXG4gICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgc3RhcnRHYW1lKCk6IHZvaWQge1xyXG5cclxuICAgICAgIFxyXG4gICAgfVxyXG59Il19
